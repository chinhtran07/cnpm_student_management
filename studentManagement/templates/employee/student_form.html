{% extends 'layout/base.html' %}

{% block content %}
<div class="container">
  <h2>Thêm học sinh mới</h2>
  <form method="POST" action="{{ url_for('add_or_update_student') }}">

   {{ form.csrf_token }}
    {{form.id}}
    <div class="mb-3">
      {{form.first_name.label}}
      {{form.first_name(class="form-control")}}
    </div>
    <div class="mb-3">
        {{form.last_name.label}}
        {{form.last_name(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.gender.label}}
      {{form.gender(class="form-control")}}
    </div>
    <div class="mb-3">
        {{form.admission_date.label}}
        {{form.admission_date(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.dob.label}}
      {{form.dob(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.address.label}}
      {{form.address(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.email.label}}
      {{form.email(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.phone_number.label}}
      {{form.phone_number(class="form-control")}}
    </div>
    <div class="mb-3">
      {{form.is_active.label}}
      {{form.is_active()}}
    </div>
    <button type="submit" class="btn btn-primary">Lưu</button>
  </form>
</div>

<script>
  document.getElementById("studentForm").addEventListener("submit", function(event) {
    var dobInput = document.getElementById("dob");
    var dobValue = new Date(dobInput.value);

    var today = new Date();
    var age = today.getFullYear() - dobValue.getFullYear();
    var monthDiff = today.getMonth() - dobValue.getMonth();
    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dobValue.getDate())) {
      age--;
    }

    if (age < 15 || age > 20) {
      alert("Tuổi của học sinh phải nằm trong khoảng từ 15 đến 20.");
      event.preventDefault();
    }
  });
</script>

{% endblock %}
